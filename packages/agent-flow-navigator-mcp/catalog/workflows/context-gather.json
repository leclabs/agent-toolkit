{
  "id": "context-gather",
  "name": "Context Gather",
  "description": "Toy workflow demonstrating fork/join. Fans out into three parallel information-gathering branches (system info, weather, repository), then synthesizes everything into a single summary.",
  "nodes": {
    "start": {
      "type": "start",
      "name": "Start",
      "description": "Context gathering begins"
    },
    "fork_gather": {
      "type": "fork",
      "name": "Fork Gather",
      "join": "join_gather",
      "maxConcurrency": 5
    },
    "system_info": {
      "type": "task",
      "name": "System Information",
      "description": "Run `uname -a` and return the output.",
      "agent": "Bash",
      "emoji": "üîç",
      "stage": "investigation"
    },
    "weather_info": {
      "type": "task",
      "name": "Weather Report",
      "description": "Get today's weather at the user's location. Use a web search or weather API to find current conditions, temperature, and forecast.",
      "agent": "Planner",
      "emoji": "üìã",
      "stage": "investigation"
    },
    "repo_info": {
      "type": "task",
      "name": "Repository Information",
      "description": "Run `git remote -v` and return the output.",
      "agent": "Bash",
      "emoji": "üîç",
      "stage": "investigation"
    },
    "repo_analyze": {
      "type": "task",
      "name": "Analyze Repository",
      "description": "Run `git log --oneline -3` and return the output.",
      "agent": "Bash",
      "emoji": "üëÄ",
      "stage": "investigation"
    },
    "join_gather": {
      "type": "join",
      "name": "Join Gather",
      "fork": "fork_gather"
    },
    "summarize": {
      "type": "task",
      "name": "Summarize Context",
      "description": "Combine findings from all three branches into a single context summary. Present system info, weather, and repo info in a clear, readable format.",
      "agent": "Architect",
      "emoji": "üèõÔ∏è",
      "stage": "planning"
    },
    "end_success": {
      "type": "end",
      "result": "success",
      "name": "Context Gathered",
      "description": "All context gathered and summarized"
    },
    "hitl_failed": {
      "type": "end",
      "result": "blocked",
      "escalation": "hitl",
      "name": "Gather Failed",
      "description": "One or more branches failed to gather information"
    }
  },
  "edges": [
    { "from": "start", "to": "fork_gather" },
    { "from": "fork_gather", "to": "system_info", "label": "Gather system information" },
    { "from": "fork_gather", "to": "weather_info", "label": "Get today's weather" },
    { "from": "fork_gather", "to": "repo_info", "label": "Get repository information" },
    { "from": "system_info", "to": "join_gather" },
    { "from": "weather_info", "to": "join_gather" },
    { "from": "repo_info", "to": "repo_analyze", "on": "passed" },
    { "from": "repo_info", "to": "join_gather", "on": "failed" },
    { "from": "repo_analyze", "to": "join_gather" },
    { "from": "join_gather", "to": "summarize", "on": "passed", "label": "All branches complete" },
    { "from": "join_gather", "to": "hitl_failed", "on": "failed", "label": "One or more branches failed" },
    { "from": "summarize", "to": "end_success" },
    { "from": "hitl_failed", "to": "fork_gather", "on": "passed", "label": "Human resolved issue, retry" }
  ]
}
